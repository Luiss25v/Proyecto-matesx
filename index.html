<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MathBot · Ayuda‑memoria (Funciones)</title>

  <!-- Fonts + Icons (CDN) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <a class="skip-link" href="#mainScroll">Saltar al contenido</a>

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="brand">
      <div class="brand-logo" aria-hidden="true"><i class="fa-solid fa-robot"></i></div>
      <div class="brand-text">
        <div class="brand-title">MathBot</div>
        <div class="brand-sub">GAMER EDITION</div>
      </div>
    </div>

    <div class="sidebar-search">
      <i class="fas fa-search"></i>
      <input id="sidebarSearch" type="text" placeholder="Buscar sección..." autocomplete="off" />
    </div>

    <nav class="nav" aria-label="Navegación">
      <button class="nav-btn active" data-tab="inicio"><i class="fa-solid fa-house"></i><span>Inicio</span></button>
      <button class="nav-btn" data-tab="prod-cartesiano"><i class="fa-solid fa-braille"></i><span>Producto<br/>Cartesiano</span></button>
      <button class="nav-btn" data-tab="funciones"><i class="fa-solid fa-diagram-project"></i><span>Funciones</span></button>
      <button class="nav-btn" data-tab="ejercicios"><i class="fa-solid fa-file-pen"></i><span>Ejemplos /<br/>Hojas</span></button>
      <button class="nav-btn" data-tab="clasificacion"><i class="fa-solid fa-list-check"></i><span>Clasificación</span></button>

      <div class="nav-sep"></div>

      <button class="nav-btn" data-tab="inversa"><i class="fa-solid fa-right-left"></i><span>Función<br/>Inversa</span></button>
      <button class="nav-btn" data-tab="compuesta"><i class="fa-solid fa-layer-group"></i><span>Función<br/>Compuesta</span></button>
      <button class="nav-btn" data-tab="discreta"><i class="fa-solid fa-wave-square"></i><span>Función<br/>Discreta</span></button>

      <div class="nav-sep"></div>

      <button class="nav-btn" data-tab="video"><i class="fa-solid fa-play"></i><span>Video<br/>Explicativo</span></button>
      <button class="nav-btn" data-tab="resenas"><i class="fa-solid fa-comments"></i><span>Reseñas</span></button>
    </nav>

    <div class="footer">
      <div class="footer-mini">Samuel Robayo | EPN 2026</div>
    </div>
  </aside>

  <!-- TOPBAR (FIXED, SOLID) -->
  <header class="topbar" id="topbar">
    <div class="topbar-left">
      <div class="topbar-badge" id="currentSection">Inicio</div>

      <div class="topbar-title">
        <div class="topbar-line1">
          <span class="epn-dot" aria-hidden="true"></span>
          <span class="school">ESCUELA POLITÉCNICA NACIONAL</span>
        </div>
        <div class="topbar-line2">FACULTAD DE INGENIERÍA DE SISTEMAS</div>
        <div class="motto">“La técnica al servicio de la patria”</div>
      </div>
    </div>

    <div class="topbar-right">
      <div class="hud">
        <div class="hud-main">LV <span id="levelValue">1</span> · XP <span id="xpValue">0</span></div>
        <div class="hud-bar"><span id="xpBar"></span></div>
        <div class="hud-row">
          <span class="streak" title="Racha diaria"><i class="fas fa-fire"></i> <span id="streakValue">1</span></span>
          <button id="achBtn" class="hud-btn" type="button" title="Logros"><i class="fas fa-trophy"></i></button>
          <button id="soundBtn" class="hud-btn" type="button" title="Sonido: off"><i class="fas fa-volume-mute"></i></button>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN SCROLL AREA -->
  <main class="main" id="mainScroll">
    <!-- INICIO -->
    <section id="inicio" class="tab-content active">
      <div class="page">
        <div class="hero">
          <div class="hero-card">
            <div class="hero-eyebrow">SISTEMA INICIADO</div>
            <h1>Ayuda‑memoria interactiva de Funciones</h1>
            <p>Explora <b>funciones</b>, relaciones, producto cartesiano, inversa, composición, funciones discretas y clasificación (inyectiva/sobreyectiva/biyectiva). En cada módulo puedes ver el <b>código MATLAB</b> equivalente.</p>
            <div class="hero-actions">
              <button class="btn primary" data-tab-jump="ejercicios"><i class="fa-solid fa-bolt"></i> Ir a práctica</button>
              <button class="btn" data-tab-jump="clasificacion"><i class="fa-solid fa-list-check"></i> Clasificar funciones</button>
            </div>

            <div class="mini-grid">
              <div class="mini">
                <div class="mini-title">Atajos</div>
                <ul class="mini-list">
                  <li><kbd>/</kbd> Buscar secciones</li>
                  <li><kbd>Esc</kbd> Limpiar búsqueda</li>
                  <li><b>Enter</b> Verificar (práctica)</li>
                </ul>
              </div>
              <div class="mini">
                <div class="mini-title">Puntos</div>
                <div class="mini-list soft">XP se gana en módulos interactivos (no en Video/Reseñas).</div>
              </div>
            </div>
          </div>

          <div class="hero-side">
            <div class="stat">
              <div class="stat-num" id="statSolved">0</div>
              <div class="stat-label">Ejercicios resueltos</div>
            </div>
            <div class="stat">
              <div class="stat-num" id="statAch">0</div>
              <div class="stat-label">Logros</div>
            </div>
            <div class="note">
              Consejo: en “Clasificación” define dominio/codominio y mapeo, y el sistema te dirá si es inyectiva, sobreyectiva o biyectiva.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PRODUCTO CARTESIANO -->
    <section id="prod-cartesiano" class="tab-content">
      <div class="page">
        <h2>Producto Cartesiano</h2>
        <p>Define conjuntos A y B y calcula A×B. Si A tiene <b>m</b> elementos y B tiene <b>n</b>, entonces |A×B|=m·n.</p>

        <div class="grid-2">
          <div class="card">
            <h3><i class="fa-solid fa-square-root-variable"></i> Entrada</h3>
            <label class="label">A (ej: 1,2,3)</label>
            <input id="pcA" type="text" placeholder="1,2,3" />
            <label class="label">B (ej: a,b,c)</label>
            <input id="pcB" type="text" placeholder="a,b,c" />
            <div class="row">
              <button class="btn primary" id="pcRun"><i class="fa-solid fa-play"></i> Calcular</button>
              <button class="btn" id="pcExample"><i class="fa-solid fa-wand-magic-sparkles"></i> Ejemplo</button>
              <button class="btn danger" id="pcClear"><i class="fa-solid fa-eraser"></i> Limpiar</button>
            </div>
            <div class="result" id="pcOut">—</div>
          </div>

          <div class="card">
            <div class="card-head">
              <h3><i class="fa-solid fa-code"></i> MATLAB</h3>
              <button class="chip" data-toggle="pcMatlab">Ver MATLAB</button>
            </div>
            <pre class="code hidden" id="pcMatlab"><code>% A y B pueden ser vectores o celdas
A = [1 2 3];
B = {'a','b','c'};

% Producto cartesiano con ndgrid
[AA, BB] = ndgrid(A, 1:numel(B));
P = [AA(:), BB(:)];  % BB son índices de B

% Mostrar pares reales
pairs = arrayfun(@(i) sprintf('(%g,%s)', P(i,1), B{P(i,2)}), 1:size(P,1), 'uni', 0);
disp(pairs);</code></pre>

            <div class="callout">
              <b>Tip:</b> si B es numérico, puedes usar <code>[AA,BB]=ndgrid(A,B);</code> y apilar columnas.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FUNCIONES -->
    <section id="funciones" class="tab-content">
      <div class="page">
        <h2>¿Es función?</h2>
        <p>Ingresa pares (x→y). Es función si cada <b>x</b> tiene <b>una sola</b> salida <b>y</b>.</p>

        <div class="grid-2">
          <div class="card">
            <h3><i class="fa-solid fa-arrow-right"></i> Relación</h3>
            <label class="label">Pares (ej: 1->2, 2->3, 2->4)</label>
            <input id="fnPairs" type="text" placeholder="1->2, 2->3, 3->3" />
            <div class="row">
              <button class="btn primary" id="fnCheck"><i class="fa-solid fa-magnifying-glass"></i> Analizar</button>
              <button class="btn" id="fnExample"><i class="fa-solid fa-wand-magic-sparkles"></i> Ejemplo</button>
              <button class="btn danger" id="fnClear"><i class="fa-solid fa-eraser"></i> Limpiar</button>
            </div>
            <div class="result" id="fnOut">—</div>
          </div>

          <div class="card">
            <div class="card-head">
              <h3><i class="fa-solid fa-code"></i> MATLAB</h3>
              <button class="chip" data-toggle="fnMatlab">Ver MATLAB</button>
            </div>
            <pre class="code hidden" id="fnMatlab"><code>% pares como matriz [x y]
pairs = [1 2; 2 3; 3 3];

x = pairs(:,1);
y = pairs(:,2);

% Es función si no hay x repetidos con y distinto
[ux, ~, idx] = unique(x);
isFunc = true;

for k = 1:numel(ux)
  ys = unique(y(idx==k));
  if numel(ys) > 1
    isFunc = false;
    break;
  end
end

disp(isFunc);</code></pre>

            <div class="callout">
              <b>Idea:</b> Para detectar el “choque”, revisa dónde un mismo x produce más de un y.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- EJERCICIOS -->
    <section id="ejercicios" class="tab-content">
      <div class="page">
        <h2>Modo práctica</h2>
        <p>Genera ejercicios aleatorios, responde y gana XP (solo práctica/módulos interactivos).</p>

        <div class="grid-2">
          <div class="card">
            <h3><i class="fa-solid fa-dice"></i> Generar ejercicio</h3>
            <label class="label">Tema</label>
            <select id="practiceTopic">
              <option value="cartesiano">Producto cartesiano</option>
              <option value="composicion">Función compuesta</option>
              <option value="inversa">Función inversa</option>
              <option value="funcion">¿Es función?</option>
              <option value="discreta">Función discreta</option>
              <option value="clasificacion">Clasificación (iny/sob/bi)</option>
            </select>
            <button class="btn primary" id="genPracticeBtn"><i class="fa-solid fa-bolt"></i> Generar</button>
            <div class="question" id="practiceQuestion">Presiona <b>Generar</b> para empezar.</div>
          </div>

          <div class="card">
            <h3><i class="fa-solid fa-pen"></i> Respuesta</h3>
            <label class="label">Tu respuesta</label>
            <input id="practiceAnswer" type="text" placeholder="Escribe tu respuesta..." />
            <div class="row">
              <button class="btn" id="checkPracticeBtn"><i class="fa-solid fa-check"></i> Verificar</button>
              <button class="btn" id="hintPracticeBtn"><i class="fa-solid fa-lightbulb"></i> Pista</button>
            </div>
            <div class="feedback" id="practiceFeedback">—</div>

            <div class="row">
              <button class="btn" id="exportCsvBtn"><i class="fa-solid fa-file-csv"></i> CSV</button>
              <button class="btn" id="exportJsonBtn"><i class="fa-solid fa-file-code"></i> JSON</button>
              <button class="btn danger" id="clearPracticeBtn"><i class="fa-solid fa-trash"></i> Limpiar</button>
            </div>
          </div>
        </div>

        <div class="card">
          <h3><i class="fa-solid fa-clock-rotate-left"></i> Historial</h3>
          <div class="history" id="practiceHistory"></div>
        </div>
      </div>
    </section>

    <!-- CLASIFICACIÓN -->
    <section id="clasificacion" class="tab-content">
      <div class="page">
        <h2>Clasificación</h2>
        <p>Determina si una función es <b>inyectiva</b>, <b>sobreyectiva</b> o <b>biyectiva</b> con respecto al codominio.</p>

        <div class="grid-2">
          <div class="card">
            <h3><i class="fa-solid fa-list-check"></i> Definición</h3>
            <label class="label">Dominio A (ej: 1,2,3)</label>
            <input id="clDom" type="text" placeholder="1,2,3" />
            <label class="label">Codominio B (ej: a,b,c)</label>
            <input id="clCod" type="text" placeholder="a,b,c" />
            <label class="label">Mapeo (ej: 1->a, 2->b, 3->c)</label>
            <input id="clMap" type="text" placeholder="1->a, 2->b, 3->c" />

            <div class="row">
              <button class="btn primary" id="clRun"><i class="fa-solid fa-play"></i> Clasificar</button>
              <button class="btn" id="clExample"><i class="fa-solid fa-wand-magic-sparkles"></i> Ejemplo</button>
              <button class="btn danger" id="clClear"><i class="fa-solid fa-eraser"></i> Limpiar</button>
            </div>

            <div class="result" id="clOut">—</div>
          </div>

          <div class="card">
            <div class="card-head">
              <h3><i class="fa-solid fa-code"></i> MATLAB</h3>
              <button class="chip" data-toggle="clMatlab">Ver MATLAB</button>
            </div>
            <pre class="code hidden" id="clMatlab"><code>% Dominio y codominio como listas
A = [1 2 3];
B = {'a','b','c'};

% Mapeo como pares (x,y) donde y es etiqueta (string/celda)
pairsX = [1 2 3];
pairsY = {'a','b','c'};

% 1) Verificar función: cada x una sola salida
isFunc = numel(unique(pairsX)) == numel(pairsX);

% 2) Inyectiva: salidas distintas para x distintos
isInj = numel(unique(pairsY)) == numel(pairsY);

% 3) Sobreyectiva respecto a B: toda y del codominio aparece
isSur = all(ismember(B, unique(pairsY)));

% 4) Biyectiva
isBij = isFunc && isInj && isSur;

disp([isFunc isInj isSur isBij]);</code></pre>

            <div class="callout">
              <b>Notas:</b> Sobreyectiva depende del codominio elegido. Si cambias B, cambia el resultado.
            </div>
          </div>
        </div>

        <div class="callout">
          <b>Resumen rápido:</b>
          <ul class="mini-list">
            <li><b>Inyectiva</b>: diferentes x → diferentes y.</li>
            <li><b>Sobreyectiva</b>: el rango cubre todo el codominio.</li>
            <li><b>Biyectiva</b>: inyectiva y sobreyectiva al mismo tiempo.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- INVERSA -->
    <section id="inversa" class="tab-content">
      <div class="page">
        <h2>Función inversa</h2>
        <p>Para una función lineal <b>f(x)=ax+b</b> (a≠0), su inversa es <b>f⁻¹(y)=(y-b)/a</b>.</p>

        <div class="grid-2">
          <div class="card">
            <h3><i class="fa-solid fa-right-left"></i> Calculadora</h3>
            <div class="grid-3">
              <div>
                <label class="label">a</label>
                <input id="invA" type="number" step="1" value="2" />
              </div>
              <div>
                <label class="label">b</label>
                <input id="invB" type="number" step="1" value="3" />
              </div>
              <div>
                <label class="label">y (entrada)</label>
                <input id="invY" type="number" step="1" value="7" />
              </div>
            </div>

            <div class="row">
              <button class="btn primary" id="invRun"><i class="fa-solid fa-play"></i> Calcular</button>
              <button class="btn" id="invExample"><i class="fa-solid fa-wand-magic-sparkles"></i> Ejemplo</button>
              <button class="btn danger" id="invClear"><i class="fa-solid fa-eraser"></i> Limpiar</button>
            </div>

            <div class="result" id="invOut">—</div>
          </div>

          <div class="card">
            <div class="card-head">
              <h3><i class="fa-solid fa-code"></i> MATLAB</h3>
              <button class="chip" data-toggle="invMatlab">Ver MATLAB</button>
            </div>
            <pre class="code hidden" id="invMatlab"><code>% f(x) = a*x + b, a != 0
a = 2; b = 3; y = 7;

x = (y - b) / a;  % f^{-1}(y)
disp(x);</code></pre>

            <div class="callout">
              <b>Ojo:</b> si a=0, f(x)=b es constante y no tiene inversa como función.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- COMPUESTA -->
    <section id="compuesta" class="tab-content">
      <div class="page">
        <h2>Función compuesta</h2>
        <p>Para f y g, la composición es <b>(f∘g)(x)=f(g(x))</b>.</p>

        <div class="grid-2">
          <div class="card">
            <h3><i class="fa-solid fa-layer-group"></i> f(x)=ax+b y g(x)=cx+d</h3>
            <div class="grid-3">
              <div>
                <label class="label">a</label>
                <input id="coA" type="number" step="1" value="2" />
              </div>
              <div>
                <label class="label">b</label>
                <input id="coB" type="number" step="1" value="1" />
              </div>
              <div>
                <label class="label">x</label>
                <input id="coX" type="number" step="1" value="3" />
              </div>
            </div>

            <div class="grid-3">
              <div>
                <label class="label">c</label>
                <input id="coC" type="number" step="1" value="1" />
              </div>
              <div>
                <label class="label">d</label>
                <input id="coD" type="number" step="1" value="-2" />
              </div>
              <div class="soft small">g(x)=cx+d</div>
            </div>

            <div class="row">
              <button class="btn primary" id="coRun"><i class="fa-solid fa-play"></i> Calcular</button>
              <button class="btn" id="coExample"><i class="fa-solid fa-wand-magic-sparkles"></i> Ejemplo</button>
              <button class="btn danger" id="coClear"><i class="fa-solid fa-eraser"></i> Limpiar</button>
            </div>

            <div class="result" id="coOut">—</div>
          </div>

          <div class="card">
            <div class="card-head">
              <h3><i class="fa-solid fa-code"></i> MATLAB</h3>
              <button class="chip" data-toggle="coMatlab">Ver MATLAB</button>
            </div>
            <pre class="code hidden" id="coMatlab"><code>% f(x)=a*x+b, g(x)=c*x+d
a=2; b=1; c=1; d=-2; x=3;

g = c*x + d;
fog = a*g + b;      % (f o g)(x)

f = a*x + b;
gof = c*f + d;      % (g o f)(x)

disp([fog gof]);</code></pre>

            <div class="callout">
              <b>Recuerda:</b> (f∘g) y (g∘f) en general son diferentes.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- DISCRETA -->
    <section id="discreta" class="tab-content">
      <div class="page">
        <h2>Función discreta</h2>
        <p>Una función discreta trabaja con dominio finito: por ejemplo f(1..n)=[…].</p>

        <div class="grid-2">
          <div class="card">
            <h3><i class="fa-solid fa-wave-square"></i> Tabla discreta</h3>
            <label class="label">Valores (ej: 5,1,9,2)</label>
            <input id="dsVals" type="text" placeholder="5,1,9,2" />
            <label class="label">k (índice)</label>
            <input id="dsK" type="number" min="1" step="1" value="2" />
            <div class="row">
              <button class="btn primary" id="dsRun"><i class="fa-solid fa-play"></i> Evaluar</button>
              <button class="btn" id="dsExample"><i class="fa-solid fa-wand-magic-sparkles"></i> Ejemplo</button>
              <button class="btn danger" id="dsClear"><i class="fa-solid fa-eraser"></i> Limpiar</button>
            </div>
            <div class="result" id="dsOut">—</div>
            <div class="table-wrap" id="dsTable"></div>
          </div>

          <div class="card">
            <div class="card-head">
              <h3><i class="fa-solid fa-code"></i> MATLAB</h3>
              <button class="chip" data-toggle="dsMatlab">Ver MATLAB</button>
            </div>
            <pre class="code hidden" id="dsMatlab"><code>% f(1..n) definido por una lista
vals = [5 1 9 2];
k = 2;

fk = vals(k);
disp(fk);</code></pre>

            <div class="callout">
              <b>Tip:</b> En MATLAB, índices empiezan en 1, igual que aquí.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- VIDEO -->
    <section id="video" class="tab-content">
      <div class="page">
        <h2>Video explicativo</h2>
        <p>Video integrado (no se gana XP aquí).</p>
        <div class="video-wrap">
          <iframe
            src="https://www.youtube.com/embed/LVeErySORcg"
            title="Video explicativo"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen></iframe>
        </div>
      </div>
    </section>

    <!-- RESEÑAS -->
    <section id="resenas" class="tab-content">
      <div class="page">
        <h2>Reseñas</h2>
        <p>Deja comentarios sobre la utilidad de la ayuda‑memoria.</p>
        <div class="card">
          <label class="label">Tu reseña</label>
          <textarea id="reviewText" rows="5" placeholder="Escribe aquí..."></textarea>
          <button class="btn primary" id="saveReview"><i class="fa-solid fa-floppy-disk"></i> Guardar</button>
          <div class="history" id="reviewsList"></div>
        </div>
      </div>
    </section>

    <div class="toast" id="toast" aria-live="polite" aria-atomic="true"></div>

    <!-- Achievements Modal -->
    <div id="achModal" class="modal" aria-hidden="true">
      <div class="modal-backdrop" data-close="true"></div>
      <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="achTitle">
        <div class="modal-head">
          <h3 id="achTitle"><i class="fas fa-trophy"></i> Logros</h3>
          <button class="modal-close" type="button" data-close="true" aria-label="Cerrar"><i class="fas fa-xmark"></i></button>
        </div>
        <div class="modal-body">
          <div class="ach-grid" id="achGrid"></div>
        </div>
      </div>
    </div>

    <div id="achPopup" class="ach-popup" aria-live="polite" aria-atomic="true"></div>
  </main>

  <script src="script.js"></script>
</body>
</html>
